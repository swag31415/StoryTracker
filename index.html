<!DOCTYPE html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>StoryTracker</title>
  <link rel="icon" href="logo.png" type="image/x-icon">
  <!-- Our Styles -->
  <link rel="stylesheet" href="css/main.css">
  <insert-html link="https://swag31415.github.io/Portfolio/inserts/head.html"></insert-html>
</head>

<body>
  <insert-html link="https://swag31415.github.io/Portfolio/inserts/menu.html"></insert-html>
  <h1 style="margin-top: 0;">Story Tracker</h1>
  <main class="container" id="app">
    <div v-if="!logged_in">
      <div class="row">
        <div class="input-field col s12 m4">
          <input type="text" v-model="login_form.name"/>
          <label>Email</label>
        </div>
        <div class="input-field col s12 m4">
          <input type="password" v-model="login_form.pass"/>
          <label>Password</label>
        </div>
        <div class="input-field col s6 m2">
          <button class="btn green" @click="login()">Login</button>
        </div>
        <div class="input-field col s6 m2">
          <button class="btn blue" @click="signup()">Sign Up</button>
        </div>
      </div>
    </div>
    <div v-if="logged_in">
      <p>You are logged in as <span v-text="logged_in.displayName || logged_in.email"></span>. <a href="#!" @click="logout()">Logout</a></p>
      <div class="row">
        <div class="input-field col s6">
          <input type="text" v-model="story_name"/>
          <label class="active">Story Name</label>
        </div>
        <div class="input-field col s6">
          <button @click="record()" v-if="!rec" class="btn green">Start Recording</button>
          <button @click="stop()" v-if="rec" class="btn red">Stop Recording</button>
        </div>
      </div>
      <p class="grey-text">Your stories will show up below. <a href="#!" @click="load()">Refresh</a></p>
      <div v-for="story in stories">
        <h4 v-text="story.title || 'Untitled'"></h4>
        <p v-text="format_date(story.time)"></p>
        <div class="row">
          <div class="col s3">
            <button class="btn">Edit</button>
          </div>
          <div class="col s3">
            <button class="btn red" @click="drop(story.docid)">Delete</button>
          </div>
        </div>
        <div><audio controls :src="story.audio"></audio></div>
        <div v-if="!story.text"><button @click="transcribe(story)" class="btn">Transcribe</button></div>
        <p v-if="story.text" v-text="story.text"></p>
      </div>
    </div>
  </main>
  <insert-html link="https://swag31415.github.io/Portfolio/inserts/foot.html"></insert-html>
  <!-- HTML Inserts -->
  <script src="https://swag31415.github.io/Portfolio/js/html_inserts.js"></script>
  <!-- Vue.js -->
  <script src="https://unpkg.com/vue@3.2.37/dist/vue.global.prod.js"></script>
  <!-- Our Scripts -->
  <script src="js/main.js"></script>
</body>

</html>